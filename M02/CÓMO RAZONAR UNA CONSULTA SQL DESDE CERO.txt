CÃ“MO RAZONAR UNA CONSULTA DESDE CERO

Te explico el mÃ©todo mental para convertir un pedido humano â†’ SQL.

Voy a usar tus propias consultas como ejemplo.

ğŸ§© PASO 1 â€“ Identificar quÃ© tabla tiene el dato principal

Ejemplo:

â€œBuscÃ¡ las licencias que vencen en los prÃ³ximos 30 dÃ­as.â€

La pregunta clave es:
Â¿DÃ³nde estÃ¡ la fecha de vencimiento de las licencias? â†’ en drivers.

Listo, ya sÃ© por dÃ³nde empezar:

FROM drivers

ğŸ§© PASO 2 â€“ Â¿QuÃ© columnas necesito mostrar?

driver_id

first_name

last_name

license_expiry

Esa es la lista de SELECT.

ğŸ§© PASO 3 â€“ Â¿QuÃ© condiciÃ³n debe cumplirse?

La condiciÃ³n viene directamente del lenguaje humano:

â€œvencen en los prÃ³ximos 30 dÃ­asâ€
â†’ filtro de fecha.

En SQL:

WHERE license_expiry <= CURRENT_DATE + INTERVAL '30 days'

ğŸ§© PASO 4 â€“ Â¿Tengo que agrupar o contar?

En este caso no â†’ solo listar.

ğŸ§© PASO 5 â€“ Ordenar para que sea Ãºtil

Si hablamos de vencimientos:

ORDER BY license_expiry

ğŸ§© YA TENÃ‰S LA QUERY ARMADA

Sin memorizar nada difÃ­cil.
AsÃ­ es cÃ³mo la construÃ­s razonando.

ğŸ”¥ OTRO EJEMPLO

â€œÂ¿CÃ³mo saco los kilÃ³metros promedio por vehÃ­culo?â€

Preguntate:

1. Â¿DÃ³nde estÃ¡n los kilÃ³metros?

En routes.distance_km

2. Â¿QuÃ© relaciona vehÃ­culos con rutas?

La tabla trips
porque cada trip tiene:

vehicle_id

route_id

3. Â¿QuÃ© tengo que sumar?

distance_km de cada trip

4. Â¿QuÃ© tengo que dividir?

SUM(distance_km) / COUNT(trips)

AsÃ­ nace una consulta:

SELECT
   t.vehicle_id,
   AVG(r.distance_km) AS km_promedio
FROM trips t
JOIN routes r ON r.route_id = t.route_id
GROUP BY t.vehicle_id;


Fijate que ya sabÃ©s construir queries porque â€¦
sabÃ©s razonar la estructura del modelo.